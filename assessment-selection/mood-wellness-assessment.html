<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mood & Wellness Check</title>
  <link rel="stylesheet" href="../home-screen/style.css">
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: var(--mindful-brown-10, #f7f4f2);
      width: 100vw;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .assessment-container {
      background: var(--mindful-brown-10, #f7f4f2);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    .header {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      max-width: 375px;
      padding: 16px 20px;
      position: relative;
      margin-top: 44px;
    }

    .back-button {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background: var(--serenity-green-50, #16572e);
      border-radius: 50%;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .back-button:hover {
      transform: scale(1.05);
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.15);
    }

    .back-button:active {
      transform: scale(0.95);
    }

    .back-arrow {
      width: 20px;
      height: 20px;
      transform: rotate(180deg);
      filter: brightness(0) invert(1);
    }

    .title-container {
      flex: 1;
      text-align: center;
      margin: 0 16px;
    }

    .page-title {
      color: var(--mindful-brown-80, #4b3425);
      font-family: var(--text-lg-extrabold-font-family, "Urbanist-ExtraBold", sans-serif);
      font-size: 18px;
      font-weight: 800;
      letter-spacing: -0.01em;
      margin: 0;
      line-height: 1.2;
    }

    .page-subtitle {
      color: var(--mindful-brown-60, #8b7355);
      font-family: var(--text-base-medium-font-family, "Urbanist-Medium", sans-serif);
      font-size: 14px;
      font-weight: 500;
      margin: 4px 0 0 0;
      line-height: 1.4;
    }

    .placeholder-space {
      width: 40px;
      height: 40px;
    }

    .progress-container {
      width: 100%;
      max-width: 375px;
      padding: 0 20px;
      margin-top: 16px;
    }

    .progress-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .progress-left {
      color: var(--mindful-brown-80, #4b3425);
      font-family: var(--text-base-semibold-font-family, "Urbanist-SemiBold", sans-serif);
      font-size: 14px;
      font-weight: 600;
    }

    .progress-right {
      color: var(--mindful-brown-60, #8b7355);
      font-family: var(--text-base-medium-font-family, "Urbanist-Medium", sans-serif);
      font-size: 14px;
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      background: rgba(139, 115, 85, 0.2);
      border-radius: 3px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(135deg, var(--serenity-green-50, #16572e) 0%, var(--serenity-green-40, #1e6b3a) 100%);
      border-radius: 3px;
      transition: width 0.3s ease;
      width: 10%;
    }

    .question-container {
      width: 100%;
      max-width: 375px;
      padding: 0 20px;
      margin-top: 32px;
    }

    .question-card {
      background: #ffffff;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.08);
      margin-bottom: 24px;
    }

    .question-text {
      color: var(--mindful-brown-80, #4b3425);
      font-family: var(--text-lg-extrabold-font-family, "Urbanist-ExtraBold", sans-serif);
      font-size: 18px;
      font-weight: 800;
      line-height: 1.3;
      margin-bottom: 24px;
    }

    .options-container {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .option-button {
      background: #ffffff;
      border: 2px solid rgba(139, 115, 85, 0.2);
      border-radius: 12px;
      padding: 16px 20px;
      text-align: left;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: var(--text-base-medium-font-family, "Urbanist-Medium", sans-serif);
      font-size: 16px;
      color: var(--mindful-brown-80, #4b3425);
      line-height: 1.4;
    }

    .option-button:hover {
      border-color: var(--serenity-green-50, #16572e);
      background: rgba(22, 87, 46, 0.05);
    }

    .option-button.selected {
      border-color: var(--serenity-green-50, #16572e);
      background: rgba(22, 87, 46, 0.1);
    }

    .navigation-buttons {
      display: flex;
      justify-content: center;
      width: 100%;
      max-width: 375px;
      padding: 0 20px;
      margin-top: 24px;
      margin-bottom: 32px;
    }

    .nav-button {
      background: linear-gradient(135deg, var(--serenity-green-50, #16572e) 0%, var(--serenity-green-40, #1e6b3a) 100%);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px 32px;
      font-family: var(--text-base-semibold-font-family, "Urbanist-SemiBold", sans-serif);
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      min-width: 120px;
    }

    .nav-button:hover {
      transform: scale(1.02);
      box-shadow: 0px 4px 12px rgba(22, 87, 46, 0.3);
    }

    .nav-button:active {
      transform: scale(0.98);
    }

    .nav-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .hidden {
      display: none;
    }

    /* Page Transition Animations */
    .page-transition {
      animation: pageSlideIn 0.6s cubic-bezier(0.23, 1, 0.32, 1) forwards;
    }

    .page-transition-out {
      animation: pageSlideOut 0.4s cubic-bezier(0.23, 1, 0.32, 1) forwards;
    }

    @keyframes pageSlideIn {
      0% {
        opacity: 0;
        transform: translateX(30px);
      }
      100% {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes pageSlideOut {
      0% {
        opacity: 1;
        transform: translateX(0);
      }
      100% {
        opacity: 0;
        transform: translateX(-30px);
      }
    }

    /* Smooth navigation button transitions */
    .nav-transition {
      transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
    }

    .nav-transition:hover {
      transform: translateY(-2px);
      box-shadow: 0px 8px 24px rgba(22, 87, 46, 0.15);
    }
  </style>
</head>
<body>
  <div class="assessment-container page-transition">
    <!-- Header with back button and title -->
    <div class="header">
      <button class="back-button nav-transition" onclick="goBack()">
        <svg class="back-arrow" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      
      <div class="title-container">
        <h1 class="page-title">Mood & Wellness Check</h1>
        <p class="page-subtitle">Understand your emotional well-being and daily mood patterns</p>
      </div>
      
      <div class="placeholder-space"></div>
    </div>

    <!-- Progress bar -->
    <div class="progress-container">
      <div class="progress-header">
        <div class="progress-left" id="progressLeft">Question 1 of 10</div>
        <div class="progress-right" id="progressRight">10% Complete</div>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
    </div>

    <!-- Question container -->
    <div class="question-container">
      <div class="question-card" id="questionCard">
        <div class="question-text" id="questionText">How would you rate your overall mood in the past week?</div>
        <div class="options-container" id="optionsContainer">
          <!-- Options will be populated here -->
        </div>
      </div>
    </div>

    <!-- Navigation buttons -->
    <div class="navigation-buttons">
      <button class="nav-button" id="nextButton" onclick="nextQuestion()">Next</button>
    </div>
  </div>

  <script>
    let currentQuestion = 1;
    let totalQuestions = 10;
    let answers = {};

    // Question data
    const questions = [
      {
        question: "How would you rate your overall mood in the past week?",
        options: ["Never", "Rarely", "Sometimes", "Often", "Always"]
      },
      {
        question: "How often have you felt happy or content recently?",
        options: ["Never", "Rarely", "Sometimes", "Often", "Always"]
      },
      {
        question: "How often have you felt sad, down, or hopeless?",
        options: ["Never", "Rarely", "Sometimes", "Often", "Always"]
      },
      {
        question: "How much energy have you had for daily activities?",
        options: ["Never", "Rarely", "Sometimes", "Often", "Always"]
      },
      {
        question: "How often have you enjoyed things you usually like?",
        options: ["Never", "Rarely", "Sometimes", "Often", "Always"]
      },
      {
        question: "How well have you been sleeping?",
        options: ["Never", "Rarely", "Sometimes", "Often", "Always"]
      },
      {
        question: "How often have you felt irritable or easily frustrated?",
        options: ["Never", "Rarely", "Sometimes", "Often", "Always"]
      },
      {
        question: "How connected have you felt to friends or family?",
        options: ["Never", "Rarely", "Sometimes", "Often", "Always"]
      },
      {
        question: "How often have you felt anxious or worried?",
        options: ["Never", "Rarely", "Sometimes", "Often", "Always"]
      },
      {
        question: "How motivated have you felt to accomplish your goals?",
        options: ["Never", "Rarely", "Sometimes", "Often", "Always"]
      }
    ];

    function goBack() {
      // Add exit animation before navigation
      const container = document.querySelector('.assessment-container');
      container.classList.remove('page-transition');
      container.classList.add('page-transition-out');
      
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 400);
    }

    function updateProgress() {
      const progressFill = document.getElementById('progressFill');
      const progressLeft = document.getElementById('progressLeft');
      const progressRight = document.getElementById('progressRight');
      const percentage = (currentQuestion / totalQuestions) * 100;
      
      progressFill.style.width = percentage + '%';
      progressLeft.textContent = `Question ${currentQuestion} of ${totalQuestions}`;
      progressRight.textContent = `${percentage}% Complete`;
    }

    function loadQuestion(questionNumber) {
      const questionText = document.getElementById('questionText');
      const optionsContainer = document.getElementById('optionsContainer');
      
      if (questions[questionNumber - 1]) {
        questionText.textContent = questions[questionNumber - 1].question;
        
        // Clear previous options
        optionsContainer.innerHTML = '';
        
        // Add options
        questions[questionNumber - 1].options.forEach((option, index) => {
          const button = document.createElement('button');
          button.className = 'option-button';
          button.textContent = option;
          button.onclick = () => selectOption(index);
          
          // Check if this option was previously selected
          if (answers[questionNumber] === index) {
            button.classList.add('selected');
          }
          
          optionsContainer.appendChild(button);
        });
      }
      
      updateNavigationButtons();
    }

    function selectOption(optionIndex) {
      // Remove previous selection
      const buttons = document.querySelectorAll('.option-button');
      buttons.forEach(button => button.classList.remove('selected'));
      
      // Select new option
      event.target.classList.add('selected');
      
      // Save answer
      answers[currentQuestion] = optionIndex;
      
      updateNavigationButtons();
    }

    function updateNavigationButtons() {
      const nextButton = document.getElementById('nextButton');
      
      nextButton.disabled = answers[currentQuestion] === undefined && currentQuestion !== totalQuestions;
      
      if (currentQuestion === totalQuestions) {
        nextButton.textContent = 'Submit';
      } else {
        nextButton.textContent = 'Next';
      }
    }

    function nextQuestion() {
      if (currentQuestion < totalQuestions) {
        currentQuestion++;
        loadQuestion(currentQuestion);
        updateProgress();
      } else if (currentQuestion === totalQuestions) {
        // Submit assessment
        submitAssessment();
      }
    }

    function submitAssessment() {
      // Calculate score based on answers
      let totalScore = 0;
      const scoreValues = {
        0: 0, // Never
        1: 1, // Rarely
        2: 2, // Sometimes
        3: 3, // Often
        4: 4  // Always
      };
      
      // Calculate total score
      for (let i = 1; i <= totalQuestions; i++) {
        if (answers[i] !== undefined) {
          totalScore += scoreValues[answers[i]];
        }
      }
      
      // Calculate percentage (max score is 40)
      const percentage = (totalScore / 40) * 100;
      
      // Store results in localStorage for the results page
      const results = {
        score: totalScore,
        percentage: percentage,
        answers: answers
      };
      
      localStorage.setItem('moodWellnessResults', JSON.stringify(results));
      
      // Mark assessment as completed
      const completedAssessments = JSON.parse(localStorage.getItem('completedAssessments') || '{}');
      completedAssessments.moodWellness = true;
      localStorage.setItem('completedAssessments', JSON.stringify(completedAssessments));
      
      // Navigate to results page (you can create a mood-wellness-results.html later)
      alert('Assessment completed! Your mood & wellness score: ' + Math.round(percentage) + '%');
      window.location.href = 'index.html';
    }

    // Initialize the assessment
    document.addEventListener('DOMContentLoaded', function() {
      loadQuestion(1);
      updateProgress();
    });
  </script>
</body>
</html>