<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Academic Stress Assessment Results</title>
  <link rel="stylesheet" href="../home-screen/style.css">
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #f7f4f2 0%, #e8f5e8 100%);
      width: 100vw;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .results-container {
      background: linear-gradient(135deg, #f7f4f2 0%, #e8f5e8 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    .header {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      max-width: 375px;
      padding: 16px 20px;
      position: relative;
      margin-top: 44px;
    }

    .back-button {
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--serenity-green-50, #16572e);
      border-radius: 8px;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
      padding: 8px 16px;
      color: white;
      font-family: var(--text-base-semibold-font-family, "Urbanist-SemiBold", sans-serif);
      font-size: 14px;
      font-weight: 600;
    }

    .back-button:hover {
      transform: scale(1.02);
      box-shadow: 0px 4px 12px rgba(22, 87, 46, 0.3);
    }

    .back-arrow {
      width: 16px;
      height: 16px;
      transform: rotate(180deg);
      filter: brightness(0) invert(1);
      margin-right: 8px;
    }

    .content-area {
      width: 100%;
      max-width: 375px;
      padding: 0 20px;
      margin-top: 24px;
    }

    .results-card {
      background: #ffffff;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.08);
      margin-bottom: 24px;
    }

    .results-title {
      color: var(--mindful-brown-80, #4b3425);
      font-family: var(--text-lg-extrabold-font-family, "Urbanist-ExtraBold", sans-serif);
      font-size: 20px;
      font-weight: 800;
      line-height: 1.3;
      margin-bottom: 24px;
      text-align: center;
    }

    .score-section {
      text-align: center;
      margin-bottom: 24px;
    }

    .score-number {
      color: var(--serenity-green-50, #16572e);
      font-family: var(--text-lg-extrabold-font-family, "Urbanist-ExtraBold", sans-serif);
      font-size: 48px;
      font-weight: 800;
      line-height: 1;
      margin-bottom: 8px;
    }

    .score-label {
      color: var(--mindful-brown-60, #8b7355);
      font-family: var(--text-base-medium-font-family, "Urbanist-Medium", sans-serif);
      font-size: 16px;
      margin-bottom: 16px;
    }

    .stress-level {
      background: var(--serenity-green-50, #16572e);
      color: white;
      border-radius: 8px;
      padding: 8px 16px;
      font-family: var(--text-base-semibold-font-family, "Urbanist-SemiBold", sans-serif);
      font-size: 14px;
      font-weight: 600;
      display: inline-block;
      margin-bottom: 16px;
    }

    .stress-description {
      color: var(--mindful-brown-80, #4b3425);
      font-family: var(--text-base-medium-font-family, "Urbanist-Medium", sans-serif);
      font-size: 16px;
      line-height: 1.5;
      text-align: center;
    }

    .breakdown-section {
      background: rgba(22, 87, 46, 0.05);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 24px;
    }

    .breakdown-title {
      color: var(--mindful-brown-80, #4b3425);
      font-family: var(--text-lg-extrabold-font-family, "Urbanist-ExtraBold", sans-serif);
      font-size: 18px;
      font-weight: 800;
      margin-bottom: 16px;
    }

    .breakdown-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .breakdown-label {
      color: var(--mindful-brown-80, #4b3425);
      font-family: var(--text-base-medium-font-family, "Urbanist-Medium", sans-serif);
      font-size: 14px;
      flex: 1;
    }

    .breakdown-percentage {
      color: var(--serenity-green-50, #16572e);
      font-family: var(--text-base-semibold-font-family, "Urbanist-SemiBold", sans-serif);
      font-size: 14px;
      font-weight: 600;
      margin-left: 12px;
    }

    .breakdown-bar {
      width: 100%;
      height: 6px;
      background: rgba(139, 115, 85, 0.2);
      border-radius: 3px;
      margin-top: 4px;
      overflow: hidden;
    }

    .breakdown-fill {
      height: 100%;
      background: linear-gradient(135deg, var(--serenity-green-50, #16572e) 0%, var(--serenity-green-40, #1e6b3a) 100%);
      border-radius: 3px;
      transition: width 0.3s ease;
    }

    .recommendations-section {
      background: rgba(22, 87, 46, 0.05);
      border-radius: 12px;
      padding: 20px;
    }

    .recommendations-title {
      color: var(--mindful-brown-80, #4b3425);
      font-family: var(--text-lg-extrabold-font-family, "Urbanist-ExtraBold", sans-serif);
      font-size: 18px;
      font-weight: 800;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
    }

    .check-icon {
      width: 20px;
      height: 20px;
      margin-right: 8px;
      color: var(--serenity-green-50, #16572e);
    }

    .recommendation-item {
      background: #ffffff;
      border-radius: 8px;
      padding: 12px 16px;
      margin-bottom: 8px;
      color: var(--mindful-brown-80, #4b3425);
      font-family: var(--text-base-medium-font-family, "Urbanist-Medium", sans-serif);
      font-size: 14px;
      line-height: 1.4;
    }

    .recommendation-item:last-child {
      margin-bottom: 0;
    }
  </style>
</head>
<body>
  <div class="results-container">
    <!-- Header with back button -->
    <div class="header">
      <button class="back-button" onclick="goBack()">
        <svg class="back-arrow" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Back to Assessments
      </button>
    </div>

    <!-- Content area -->
    <div class="content-area">
      <div class="results-card">
        <h1 class="results-title">This is your score, and this is what you need help with</h1>
        
        <!-- Score section -->
        <div class="score-section">
          <div class="score-number" id="scoreNumber">100</div>
          <div class="score-label">/100</div>
          <div class="stress-level" id="stressLevel">Very High Stress</div>
          <div class="stress-description" id="stressDescription">
            Your stress levels are very high. Please seek immediate support from mental health professionals.
          </div>
        </div>

        <!-- Detailed breakdown -->
        <div class="breakdown-section">
          <h2 class="breakdown-title">Detailed Breakdown</h2>
          
          <div class="breakdown-item">
            <div>
              <div class="breakdown-label">Academic Pressure</div>
              <div class="breakdown-bar">
                <div class="breakdown-fill" id="academicPressure" style="width: 0%"></div>
              </div>
            </div>
            <div class="breakdown-percentage" id="academicPressureText">0%</div>
          </div>

          <div class="breakdown-item">
            <div>
              <div class="breakdown-label">Self-Confidence</div>
              <div class="breakdown-bar">
                <div class="breakdown-fill" id="selfConfidence" style="width: 0%"></div>
              </div>
            </div>
            <div class="breakdown-percentage" id="selfConfidenceText">0%</div>
          </div>

          <div class="breakdown-item">
            <div>
              <div class="breakdown-label">Sleep & Health</div>
              <div class="breakdown-bar">
                <div class="breakdown-fill" id="sleepHealth" style="width: 25%"></div>
              </div>
            </div>
            <div class="breakdown-percentage" id="sleepHealthText">25%</div>
          </div>

          <div class="breakdown-item">
            <div>
              <div class="breakdown-label">Social Isolation</div>
              <div class="breakdown-bar">
                <div class="breakdown-fill" id="socialIsolation" style="width: 0%"></div>
              </div>
            </div>
            <div class="breakdown-percentage" id="socialIsolationText">0%</div>
          </div>

          <div class="breakdown-item">
            <div>
              <div class="breakdown-label">Time Management</div>
              <div class="breakdown-bar">
                <div class="breakdown-fill" id="timeManagement" style="width: 25%"></div>
              </div>
            </div>
            <div class="breakdown-percentage" id="timeManagementText">25%</div>
          </div>

          <div class="breakdown-item">
            <div>
              <div class="breakdown-label">Peer Comparison</div>
              <div class="breakdown-bar">
                <div class="breakdown-fill" id="peerComparison" style="width: 0%"></div>
              </div>
            </div>
            <div class="breakdown-percentage" id="peerComparisonText">0%</div>
          </div>
        </div>

        <!-- Personalized recommendations -->
        <div class="recommendations-section">
          <h2 class="recommendations-title">
            <svg class="check-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="currentColor"/>
            </svg>
            Personalized Recommendations
          </h2>
          
          <div class="recommendation-item">Continue your current stress management techniques</div>
          <div class="recommendation-item">Share your strategies with peers who might benefit</div>
          <div class="recommendation-item">Maintain a healthy study-life balance</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    function goBack() {
      // Navigate back to the assessment selection page
      window.location.href = 'index.html';
    }

    // Get assessment results from URL parameters or localStorage
    function loadResults() {
      // Get results from localStorage
      const resultsData = localStorage.getItem('academicStressResults');
      let results;
      
      if (resultsData) {
        results = JSON.parse(resultsData);
      } else {
        // Fallback to sample data if no results found
        results = {
          score: 5,
          percentage: 12.5,
          answers: {}
        };
      }
      
      const score = results.score;
      const percentage = results.percentage;
      
      // Display percentage-based score (0-100)
      document.getElementById('scoreNumber').textContent = Math.round(percentage);
      
      // Set stress level based on percentage
      let stressLevel, stressDescription;
      if (percentage <= 25) {
        stressLevel = "Low Stress";
        stressDescription = "Your stress levels appear to be well-managed. Keep up the good work with your coping strategies!";
      } else if (percentage <= 50) {
        stressLevel = "Moderate Stress";
        stressDescription = "You're experiencing some academic stress. Consider implementing stress management techniques.";
      } else if (percentage <= 75) {
        stressLevel = "High Stress";
        stressDescription = "Your stress levels are concerning. Consider seeking support from counselors or mental health professionals.";
      } else {
        stressLevel = "Very High Stress";
        stressDescription = "Your stress levels are very high. Please seek immediate support from mental health professionals.";
      }
      
      document.getElementById('stressLevel').textContent = stressLevel;
      document.getElementById('stressDescription').textContent = stressDescription;
      
      // Calculate detailed breakdown based on question categories
      calculateBreakdown(results.answers);
    }

    function calculateBreakdown(answers) {
      // Define question categories and their corresponding question numbers
      const categories = {
        academicPressure: [1, 2, 4], // Questions about workload, grades, exam anxiety
        selfConfidence: [7], // Question about feeling not smart enough
        sleepHealth: [3], // Question about sleep due to stress
        socialIsolation: [9], // Question about feeling isolated
        timeManagement: [8], // Question about procrastination
        peerComparison: [5] // Question about comparing to peers
      };
      
      const scoreValues = { 0: 0, 1: 1, 2: 2, 3: 3, 4: 4 };
      
      // Calculate scores for each category
      Object.keys(categories).forEach(category => {
        let categoryScore = 0;
        let maxPossibleScore = 0;
        
        categories[category].forEach(questionNum => {
          if (answers[questionNum] !== undefined) {
            categoryScore += scoreValues[answers[questionNum]];
            maxPossibleScore += 4; // Max score per question
          }
        });
        
        const categoryPercentage = maxPossibleScore > 0 ? (categoryScore / maxPossibleScore) * 100 : 0;
        
        // Update UI
        const fillElement = document.getElementById(category);
        const textElement = document.getElementById(category + 'Text');
        
        if (fillElement && textElement) {
          fillElement.style.width = categoryPercentage + '%';
          textElement.textContent = Math.round(categoryPercentage) + '%';
        }
      });
    }

    // Initialize results page
    document.addEventListener('DOMContentLoaded', function() {
      loadResults();
    });
  </script>
</body>
</html>