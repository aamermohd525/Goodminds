<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./vars.css">
  <link rel="stylesheet" href="./style.css">
  
  
  <style>
   a,
   button,
   input,
   select,
   h1,
   h2,
   h3,
   h4,
   h5,
   * {
       box-sizing: border-box;
       margin: 0;
       padding: 0;
       border: none;
       text-decoration: none;
       background: none;
   
       -webkit-font-smoothing: antialiased;
   }
   
   menu, ol, ul {
       list-style-type: none;
       margin: 0;
       padding: 0;
   }
   </style>
  <title>Document</title>
</head>
<body>
  <div class="loading-screen-progress">
    <img class="logomark" src="logomark0.svg" />
    <div class="_99">
      <span>
        <span class="_99-span progress-shimmer" id="progressCounter">0</span>
        <span class="_99-span2">%</span>
      </span>
    </div>
    <div id="confettiContainer"></div>
  </div>
  
  <script>
    let progress = 0;
    let progressInterval;
    let hasStarted = false;
    
    function startProgress() {
      if (hasStarted) return; // Prevent multiple starts
      
      hasStarted = true;
      progress = 0;
      updateProgress();
      
      progressInterval = setInterval(() => {
        progress += 1;
        updateProgress();
        
        if (progress >= 99) {
          clearInterval(progressInterval);
          progress = 99; // Ensure it stops at exactly 99
          updateProgress();
        }
      }, 30); // Update every 30ms for smooth animation (3000ms / 99 = ~30ms)
    }
    
    function updateProgress() {
      const progressCounter = document.getElementById('progressCounter');
      if (progressCounter) {
        progressCounter.textContent = progress;
        progressCounter.classList.remove('counter-pop');
        void progressCounter.offsetWidth; // force reflow for animation
        progressCounter.classList.add('counter-pop');
      }
      if (progress === 99) {
        showConfetti();
      }
    }

    function showConfetti() {
      const confettiContainer = document.getElementById('confettiContainer');
      if (!confettiContainer) return;
      for (let i = 0; i < 24; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.position = 'absolute';
        confetti.style.left = '50%';
        confetti.style.top = '50%';
        confetti.style.width = '8px';
        confetti.style.height = '8px';
        confetti.style.background = `hsl(${Math.random()*360},80%,60%)`;
        confetti.style.borderRadius = '50%';
        confetti.style.transform = `translate(-50%, -50%)`;
        confetti.style.opacity = '0.8';
        confettiContainer.appendChild(confetti);
        setTimeout(() => {
          confetti.style.transition = 'all 0.8s cubic-bezier(0.23,1,0.32,1)';
          confetti.style.transform = `translate(-50%, -50%) translate(${Math.random()*160-80}px, ${Math.random()*-120-40}px) scale(${Math.random()*0.7+0.7})`;
          confetti.style.opacity = '0';
        }, 10);
        setTimeout(() => confetti.remove(), 1200);
      }
    }
    
    // Only listen for messages from parent window to start progress
    window.addEventListener('message', function(event) {
      if (event.data === 'startProgress') {
        startProgress();
      }
    });
  </script>
</body>
</html>